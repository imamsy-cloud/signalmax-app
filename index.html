<!DOCTYPE html>
<html lang="id" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignalMax</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="./src/css/style.css">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <script src="https://cdn.tiny.cloud/1/juzgxxvtj3zxjj52orqor6lfjdoob9pedgjxz7fgxoru3ith/tinymce/8/tinymce.min.js" referrerpolicy="origin"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { '50': '#f0fdf4', '100': '#dcfce7', '200': '#bbf7d0', '300': '#86efac', '400': '#4ade80', '500': '#22c55e', '600': '#16a34a', '700': '#15803d', '800': '#166534', '900': '#14532d', '950': '#052e16' },
                    }
                }
            }
        }
    </script>
    <meta name="theme-color" content="#16a34a"/>
<link rel="manifest" href="/manifest.json">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 antialiased">

    <!-- Root untuk halaman publik (login, register) -->
    <div id="public-root"></div>

    <!-- Root untuk aplikasi utama setelah login -->
    <div id="app-root" class="hidden">
        <main id="app-content-area" class="pb-20"></main>
        <nav id="bottom-nav" class="fixed bottom-0 left-0 right-0 h-16 bg-white dark:bg-gray-800 border-t dark:border-gray-700 flex justify-around items-center z-20 shadow-lg">
            <button class="nav-item flex flex-col items-center justify-center text-gray-400 w-full h-full" data-target="home"><i class="fas fa-home text-xl mb-1"></i><span class="text-xs font-medium">Beranda</span></button>
            <button class="nav-item flex flex-col items-center justify-center text-gray-400 w-full h-full" data-target="signals"><i class="fas fa-chart-line text-xl mb-1"></i><span class="text-xs font-medium">Sinyal</span></button>
            <button class="nav-item flex flex-col items-center justify-center text-gray-400 w-full h-full" data-target="community"><i class="fas fa-users text-xl mb-1"></i><span class="text-xs font-medium">Komunitas</span></button>
            <button class="nav-item flex flex-col items-center justify-center text-gray-400 w-full h-full" data-target="education"><i class="fas fa-graduation-cap text-xl mb-1"></i><span class="text-xs font-medium">Edukasi</span></button>
            <button class="nav-item flex flex-col items-center justify-center text-gray-400 w-full h-full" data-target="profile"><i class="fas fa-user-circle text-xl mb-1"></i><span class="text-xs font-medium">Profil</span></button>
        </nav>
    </div>

    <!-- Root untuk dashboard admin -->
    <div id="dashboard-root" class="hidden">
        <div class="relative min-h-screen md:flex">
            <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>
            <aside id="sidebar" class="fixed inset-y-0 left-0 bg-white dark:bg-gray-800 shadow-md w-64 flex-shrink-0 flex flex-col z-30 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out">
                <div class="h-16 flex items-center justify-center border-b dark:border-gray-700">
                    <i class="fas fa-chart-line text-2xl text-primary-500"></i>
                    <h1 class="text-xl font-bold ml-2">SignalMax</h1>
                </div>
                <nav id="sidebar-nav" class="flex-1 px-4 py-6 space-y-2">
                    <a href="#" data-target="dashboard" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-tachometer-alt w-6 text-primary-500"></i><span>Dashboard</span></a>
                    <a href="#" data-target="users" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-users w-6 text-primary-500"></i><span>Manajemen User</span></a>
                    <a href="#" data-target="signals-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-signal w-6 text-primary-500"></i><span>Manajemen Sinyal</span></a>
                    <a href="#" data-target="content" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-book-open w-6 text-primary-500"></i><span>Manajemen Konten</span></a>
                    <a href="#" data-target="education-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-graduation-cap w-6 text-primary-500"></i><span>Manajemen Edukasi</span></a>
                    <a href="#" data-target="community-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-comments w-6 text-primary-500"></i><span>Manajemen Komunitas</span></a>
                    <a href="#" data-target="events-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-calendar-alt w-6 text-primary-500"></i><span>Manajemen Event</span></a>
                    <a href="#" data-target="notifications-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-paper-plane w-6 text-primary-500"></i><span>Manajemen Notifikasi</span></a>
                    <a href="#" data-target="payment-settings" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-link w-6 text-primary-500"></i><span>Link Pembayaran</span></a>
                    <a href="#" data-target="payments" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-receipt w-6 text-primary-500"></i><span>Pembayaran Manual</span></a>
                    <a href="#" data-target="settings-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-cog w-6 text-primary-500"></i><span>Pengaturan Beranda</span></a>
                    <a href="#" data-target="app-settings-admin" class="sidebar-link flex items-center px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-primary-500 hover:text-white"><i class="fas fa-mobile-alt w-6 text-primary-500"></i><span>Pengaturan Aplikasi</span></a>
                </nav>
                <div class="p-4 border-t dark:border-gray-700"><a href="#" id="dashboard-logout-btn" class="flex items-center px-4 py-2 rounded-lg text-red-500 hover:bg-red-100 dark:hover:bg-red-900/50"><i class="fas fa-sign-out-alt w-6"></i><span>Logout</span></a></div>
            </aside>
            <div class="flex-1 flex flex-col">
                <header class="h-16 bg-white dark:bg-gray-800 shadow-sm flex items-center justify-between px-6">
                    <button id="menu-button" class="text-gray-500 focus:outline-none md:hidden"><i class="fas fa-bars text-xl"></i></button>
                    <h2 id="page-title" class="text-xl font-semibold">Dashboard</h2>
                    <div class="flex items-center space-x-4">
                        <button id="theme-toggle-btn" class="text-gray-500 dark:text-gray-400 hover:text-primary-500"><i class="fas fa-sun"></i></button>
                        <div class="relative">
                            <button id="notification-button" class="relative text-gray-500 dark:text-gray-400"><i class="fas fa-bell text-xl"></i><span class="notification-badge absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 rounded-full flex items-center justify-center hidden"></span></button>
                        </div>
                        <div class="relative">
                            <button id="admin-menu-button" class="flex items-center space-x-2"><img src="https://placehold.co/40x40/10b981/ffffff?text=A" class="w-8 h-8 rounded-full" alt="Admin Avatar"><span class="font-semibold text-sm hidden sm:block">Admin</span><i class="fas fa-chevron-down text-xs hidden sm:block"></i></button>
                            <div id="admin-menu-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl py-2 z-20">
                                <button data-target="profile" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"><i class="fas fa-user-circle w-5 mr-2"></i> Profil Saya</button>
                                <button data-target="security" class="w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"><i class="fas fa-cog w-5 mr-2"></i> Pengaturan Akun</button>
                                <div class="border-t my-2 dark:border-gray-700"></div>
                                <button id="dashboard-menu-logout-btn" class="w-full text-left flex items-center px-4 py-2 text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/50"><i class="fas fa-sign-out-alt w-5 mr-2"></i> Logout</button>
                            </div>
                        </div>
                    </div>
                </header>
                <main id="dashboard-content-area" class="flex-1 overflow-y-auto p-6"></main>
            </div>
        </div>
    </div>

    <!-- Container untuk semua modal dan overlay -->
    <div id="modal-container">
        
        <!-- Banner Interstitial -->
        <div id="interstitial-banner-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-70 z-50 p-4 items-center justify-center">
            <div class="relative w-full max-w-sm">
                <a id="interstitial-link" href="#" class="block">
                    <img id="interstitial-image" src="" alt="Promotional Banner" class="rounded-lg shadow-xl w-full">
                </a>
                <button id="interstitial-close-btn" class="absolute -top-2 -right-2 bg-white text-gray-800 rounded-full h-8 w-8 flex items-center justify-center text-lg font-bold shadow-lg">&times;</button>
            </div>
        </div>

        <!-- Modal Upgrade Premium -->
        <div id="upgrade-premium-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center">
            <div class="modal-content bg-[#111827] text-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col">
                <div class="p-6 text-center relative">
                    <button id="close-upgrade-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl" aria-label="Tutup modal">&times;</button>
                    <i class="fas fa-crown text-4xl text-yellow-400"></i>
                    <h3 class="text-2xl font-bold mt-4">Jadilah Anggota Premium</h3>
                    <p class="text-sm text-gray-400 mt-1">Buka semua fitur dan maksimalkan potensi trading Anda.</p>
                </div>
                <div class="px-6 space-y-3 overflow-y-auto">
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-3"></i>Akses Semua Sinyal Premium</li>
                        <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-3"></i>Materi Edukasi Eksklusif</li>
                        <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-3"></i>Analisa Pasar Mendalam</li>
                        <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-3"></i>Badge Premium di Profil</li>
                    </ul>
                    <div class="pt-2 space-y-3">
                        <div class="plan-option p-4 border border-gray-600 rounded-lg cursor-pointer" data-plan="weekly"><p class="font-bold">Mingguan</p><p id="price-weekly" class="text-lg font-bold text-gray-200">Rp 0</p></div>
                        <div class="plan-option p-4 border border-gray-600 rounded-lg cursor-pointer relative" data-plan="monthly"><span id="discount-monthly-badge" class="hidden absolute -top-3 right-4 text-xs bg-red-600 text-white px-2 py-0.5 rounded-full font-semibold"></span><p class="font-bold">Bulanan</p><p class="text-lg font-bold text-gray-200"><span id="price-monthly">Rp 0</span><span id="price-monthly-strikethrough" class="text-sm font-normal text-gray-500 line-through ml-2">Rp 0</span></p></div>
                        <div class="plan-option p-4 border border-gray-600 rounded-lg cursor-pointer" data-plan="yearly"><p class="font-bold">Tahunan</p><p id="price-yearly" class="text-lg font-bold text-gray-200">Rp 0</p></div>
                    </div>
                </div>
                <div class="p-6 mt-auto"><button id="proceed-payment-btn" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition disabled:bg-gray-500"><span>Lanjutkan Pembayaran</span></button></div>
            </div>
        </div>

        <!-- Modal Edit Profil -->
        <div id="edit-profile-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center"><div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col"><div class="p-4 border-b dark:border-gray-700 flex justify-between items-center"><h3 class="text-lg font-semibold">Edit Profil</h3><button id="close-edit-profile-btn" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl" aria-label="Tutup modal">&times;</button></div><div class="p-6 space-y-4 overflow-y-auto"><div><label class="text-sm font-medium text-gray-600 dark:text-gray-300">Foto Sampul</label><div class="mt-1 relative"><img id="edit-thumbnail-preview" src="https://placehold.co/400x150" alt="Preview Sampul" class="w-full h-36 object-cover rounded-lg bg-gray-200 dark:bg-gray-700"><label for="edit-thumbnail-input" class="absolute inset-0 flex items-center justify-center bg-black/40 text-white cursor-pointer opacity-0 hover:opacity-100 transition-opacity rounded-lg"><i class="fas fa-camera mr-2"></i> Ganti Sampul</label><input type="file" id="edit-thumbnail-input" class="hidden" accept="image/*"></div></div><div><label class="text-sm font-medium text-gray-600 dark:text-gray-300">Foto Profil</label><div class="mt-1 flex items-center space-x-4"><img id="edit-avatar-preview" src="https://placehold.co/100x100" alt="Preview Avatar" class="w-20 h-20 rounded-full object-cover bg-gray-200 dark:bg-gray-700"><label for="edit-avatar-input" class="cursor-pointer text-sm font-semibold text-primary-600 hover:underline">Ganti Foto</label><input type="file" id="edit-avatar-input" class="hidden" accept="image/*"></div></div><div><label for="edit-name-input" class="text-sm font-medium text-gray-600 dark:text-gray-300">Nama Lengkap</label><input type="text" id="edit-name-input" class="mt-1 w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"></div></div><div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-end gap-3 border-t dark:border-gray-700"><button id="cancel-edit-profile-btn" class="px-4 py-2 text-sm font-semibold rounded-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500">Batal</button><button id="save-profile-btn" class="px-4 py-2 text-sm font-bold rounded-lg bg-primary-600 text-white hover:bg-primary-700 h-9 w-24 flex items-center justify-center"><span>Simpan</span></button></div></div></div>
        
        <!-- Modal Lupa Password -->
        <div id="forgot-password-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center"><div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm"><div class="p-5 border-b dark:border-gray-700"><h3 class="text-lg font-semibold">Reset Password</h3></div><div class="p-6 space-y-4"><p class="text-sm text-gray-600 dark:text-gray-400">Masukkan email Anda. Kami akan mengirimkan link untuk mereset password Anda.</p><input type="email" id="reset-email-input" placeholder="Email terdaftar" class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border rounded-lg"></div><div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-end gap-3"><button id="cancel-reset-btn" class="px-4 py-2 text-sm font-semibold rounded-lg bg-gray-200 dark:bg-gray-600">Batal</button><button id="send-reset-link-btn" class="px-4 py-2 text-sm font-bold rounded-lg bg-primary-600 text-white h-9 w-28 flex items-center justify-center"><span>Kirim Link</span></button></div></div></div>
        
        <!-- Modal Hapus Akun -->
        <div id="delete-account-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center"><div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm text-center"><div class="p-6"><i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i><h3 class="text-lg font-semibold">Anda Yakin?</h3><p class="text-sm text-gray-500 mt-2">Tindakan ini akan menghapus akun Anda secara permanen. Semua data Anda akan hilang dan tidak dapat dipulihkan.</p></div><div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-center gap-3"><button class="cancel-modal-btn px-6 py-2 text-sm font-semibold rounded-lg bg-gray-200 dark:bg-gray-600">Batal</button><button id="confirm-delete-btn" class="px-6 py-2 text-sm font-bold rounded-lg bg-red-600 text-white h-9 w-32 flex items-center justify-center"><span>Ya, Hapus</span></button></div></div></div>
        
        <!-- Modal Buat Postingan (Terpadu) -->
        <div id="post-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-start justify-center">
            <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg mt-10 max-h-[80vh] flex flex-col">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                    <h3 class="text-lg font-semibold">Buat Postingan</h3>
                    <button id="close-post-modal-btn" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl">&times;</button>
                </div>
                <div class="p-4 space-y-4 overflow-y-auto">
                    <textarea id="post-textarea" class="w-full h-24 bg-transparent focus:outline-none text-lg resize-none textarea-no-scrollbar" placeholder="Apa yang Anda pikirkan?"></textarea>
                    <div id="image-preview-container" class="hidden relative">
                        <img id="image-preview" src="#" alt="Image preview" class="rounded-lg max-h-72 w-full object-contain">
                        <button id="remove-image-btn" class="absolute top-2 right-2 bg-black/50 text-white rounded-full w-7 h-7 flex items-center justify-center">&times;</button>
                    </div>
                    <div id="poll-creation-area" class="hidden space-y-2">
                        <input type="text" class="poll-option-input w-full bg-gray-100 dark:bg-gray-700 p-2 rounded-lg text-sm" placeholder="Opsi 1">
                        <input type="text" class="poll-option-input w-full bg-gray-100 dark:bg-gray-700 p-2 rounded-lg text-sm" placeholder="Opsi 2">
                        <div id="more-poll-options"></div>
                        <button id="add-poll-option-btn" class="text-sm text-primary-600 font-semibold">+ Tambah Opsi</button>
                    </div>
                    <input type="file" id="image-file-input" class="hidden" accept="image/*">
                </div>
                <div class="p-4 border-t dark:border-gray-700 space-y-3">
                    <div class="flex items-center justify-between text-gray-500">
                        <div class="flex items-center space-x-2">
                            <button id="post-image-btn" class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" title="Tambah Gambar"><i class="fas fa-image text-green-500"></i></button>
                            <button id="post-poll-btn" class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" title="Buat Polling"><i class="fas fa-poll text-blue-500"></i></button>
                        </div>
                        <button id="submit-post-btn" class="px-5 py-2 text-sm font-bold rounded-full bg-primary-600 text-white hover:bg-primary-700 disabled:bg-primary-400 dark:disabled:bg-primary-700/50"><span>Posting</span></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Komentar -->
        <div id="comment-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 flex items-end"><div class="modal-content bg-white dark:bg-gray-800 rounded-t-2xl w-full max-h-[80vh] flex flex-col"><div class="p-4 border-b dark:border-gray-700 text-center relative"><h3 class="text-lg font-semibold">Komentar</h3><button id="close-comment-modal-btn" class="absolute top-2 right-3 text-2xl">&times;</button></div><div id="comment-list" class="flex-1 p-4 space-y-4 overflow-y-auto"></div><div class="p-2 border-t dark:border-gray-700 flex items-start space-x-2"><img src="https://placehold.co/40x40" alt="Avatar" class="current-user-avatar w-9 h-9 rounded-full object-cover"><div class="flex-1 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center pr-2"><textarea id="comment-input" placeholder="Tulis komentar..." class="w-full bg-transparent p-2 focus:outline-none resize-none textarea-no-scrollbar textarea-no-outline" rows="1"></textarea><button id="submit-comment-btn" class="text-primary-500 font-semibold disabled:text-gray-400" disabled>Kirim</button></div></div></div></div>
        
        <!-- Modal Edit & Hapus Postingan -->
        <div id="edit-post-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center"><div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg"><div class="p-4 border-b flex justify-between items-center"><h3 class="text-lg font-semibold">Edit Postingan</h3><button id="close-edit-post-modal-btn" class="text-2xl">&times;</button></div><div class="p-4"><textarea id="edit-post-textarea" class="w-full h-32 bg-gray-50 dark:bg-gray-700 p-2 rounded-lg"></textarea></div><div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-end gap-3"><button id="cancel-edit-post-btn" class="px-4 py-2 text-sm rounded-lg bg-gray-200 dark:bg-gray-600">Batal</button><button id="save-post-changes-btn" class="px-4 py-2 text-sm font-bold rounded-lg bg-primary-600 text-white"><span>Simpan</span></button></div></div></div>
        <div id="delete-post-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center"><div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm text-center"><div class="p-6"><i class="fas fa-trash-alt text-3xl text-red-500 mb-4"></i><h3 class="text-lg font-semibold">Hapus Postingan?</h3><p class="text-sm text-gray-500 mt-2">Postingan ini akan dihapus secara permanen.</p></div><div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-center gap-3"><button id="cancel-delete-post-btn" class="px-6 py-2 text-sm rounded-lg bg-gray-200 dark:bg-gray-600">Batal</button><button id="confirm-delete-post-btn" class="px-6 py-2 text-sm font-bold rounded-lg bg-red-600 text-white"><span>Ya, Hapus</span></button></div></div></div>
        
        <!-- =================================================================== -->
        <!-- PERBAIKAN UTAMA: Layout Story Creator dirombak total -->
        <!-- =================================================================== -->
        <div id="story-creator-view" class="story-creator-view fixed inset-0 bg-gray-900 z-50 transform translate-y-full transition-transform duration-300 ease-in-out">
            <!-- Kontainer Flexbox Vertikal -->
            <div class="h-full w-full flex flex-col text-white">
                <!-- Header (Fixed) -->
                <div class="p-4 flex justify-between items-center flex-shrink-0">
                    <button id="close-story-creator-btn" class="text-2xl">&times;</button>
                    <button id="post-story-btn" class="hidden px-5 py-2 text-sm font-bold rounded-full bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400"><span>Posting</span></button>
                </div>
                <!-- Area Konten (Scrollable) -->
                <div class="flex-grow p-4 flex items-center justify-center overflow-y-auto">
                    <div id="story-upload-prompt" class="text-center cursor-pointer">
                        <label for="story-file-input-main" class="cursor-pointer">
                            <div class="w-24 h-24 border-2 border-dashed border-gray-500 rounded-full flex items-center justify-center mb-4"><i class="fas fa-camera text-4xl text-gray-400"></i></div>
                            <h3 class="text-lg font-semibold">Tambahkan ke Story</h3>
                        </label>
                    </div>
                    <div id="story-image-preview-container" class="hidden w-full h-full relative">
                        <img id="story-image-preview" src="#" class="w-full h-auto object-contain rounded-lg">
                    </div>
                </div>
                <!-- Footer (Fixed) -->
                <div id="story-action-buttons" class="hidden p-4 text-center flex-shrink-0">
                    <label for="story-file-input-main" class="cursor-pointer font-semibold hover:underline">Ganti Foto</label>
                </div>
                <input type="file" id="story-file-input-main" class="hidden" accept="image/*">
            </div>
        </div>
        
        <!-- Viewer Story Interaktif -->
        <div id="story-viewer" class="modal-overlay hidden fixed inset-0 bg-black z-50">
            <div class="modal-content h-full w-full flex flex-col p-2 sm:p-4">
                <div class="flex-shrink-0">
                    <div id="story-progress-bars" class="flex items-center gap-1"></div>
                    <div class="flex items-center justify-between mt-3">
                        <div class="flex items-center space-x-3">
                            <button id="story-back-btn" class="text-white text-xl w-8 h-8 flex items-center justify-center"><i class="fas fa-arrow-left"></i></button>
                            <div id="story-user-info" class="flex items-center space-x-2">
                                <img id="story-user-avatar" src="https://placehold.co/40x40" class="w-8 h-8 rounded-full object-cover">
                                <p id="story-user-name" class="text-white font-semibold text-sm">Nama Pengguna</p>
                            </div>
                        </div>
                        <div class="relative">
                            <button id="story-options-btn" class="text-white text-xl w-8 h-8 flex items-center justify-center"><i class="fas fa-ellipsis-v"></i></button>
                            <div id="story-options-dropdown" class="hidden absolute right-0 mt-2 w-40 bg-white dark:bg-gray-700 rounded-md shadow-lg z-20 border dark:border-gray-600">
                                <button id="story-report-btn" class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center"><i class="fas fa-flag w-4 mr-2"></i>Laporkan</button>
                                <button id="story-delete-btn" class="w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center"><i class="fas fa-trash-alt w-4 mr-2"></i>Hapus</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex-1 relative mt-2 flex items-center justify-center overflow-hidden">
                    <img id="story-image" src="https://placehold.co/400x800" class="max-w-full max-h-full rounded-lg object-contain">
                </div>
                <div class="absolute inset-0 top-1/4 bottom-1/4 flex justify-between items-center">
                    <button id="story-nav-prev" class="w-1/3 h-full"></button>
                    <button id="story-nav-next" class="w-1/3 h-full"></button>
                </div>
                <div class="flex-shrink-0 flex items-center justify-between p-2 space-x-3">
                    <div class="flex-1 relative">
                        <input id="story-reply-input" type="text" placeholder="Kirim pesan..." class="w-full h-10 bg-black/30 text-white rounded-full pl-4 pr-10 text-sm placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-white/50">
                        <button id="story-reply-send-btn" class="absolute right-2 top-1/2 -translate-y-1/2 text-white hover:text-primary-400"><i class="fas fa-paper-plane"></i></button>
                    </div>
                    <div class="flex items-center space-x-4 text-white">
                        <button id="story-like-btn" class="flex flex-col items-center"><i class="far fa-heart text-2xl"></i><span id="story-like-count" class="text-xs font-semibold">0</span></button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal Kuis -->
        <div id="quiz-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-60 z-40 p-4 items-center justify-center"><div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col"><div class="p-4 border-b dark:border-gray-700 flex justify-between items-center"><h3 id="quiz-title" class="text-lg font-semibold">Kuis Akhir</h3><button id="close-quiz-btn" class="text-gray-400 text-2xl">&times;</button></div><div id="quiz-content" class="p-6 flex-1 overflow-y-auto"></div><div class="p-4 bg-gray-50 dark:bg-gray-900/50 flex justify-between items-center border-t dark:border-gray-700"><span id="quiz-progress-text" class="text-sm font-semibold">Pertanyaan 1 dari 5</span><button id="quiz-next-btn" class="px-5 py-2 text-sm font-bold rounded-full bg-primary-600 text-white">Lanjut</button></div></div></div>
        
    </div>

    <script src="./src/js/main.js" type="module"></script>
    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => {
          console.log('Service Worker registered: ', registration);
        })
        .catch(registrationError => {
          console.log('Service Worker registration failed: ', registrationError);
        });
    });
  }
</script>
</body>
</body>
</html>
